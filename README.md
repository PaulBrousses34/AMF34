# **NOUVEAU SITE WEB AASSOCIATION DES MAIRES DE FRANCES DE L'HERAULT** 



![Logo AMF34](https://raw.githubusercontent.com/PaulBrousses34/AMF34/master/AMF34/public/images/logo.png)



## AMF34 ##

### *Avec les élus locaux, l'Hérault avance* 

#### Projet de création d'un nouveau site web pour l'AMF34. En attente d'acceptation du devis ...

## 1. Présentation du projet

### a) Présentation de l'association

Créée en 1907, reconnue d’utilité publique dès 1933, l’AMF est aux côtés des maires et des présidents d’intercommunalité, dans le respect des valeurs et des principes qui ont prévalu depuis sa création : défense des libertés locales, appui concret et permanent aux élus dans la gestion au quotidien, partenariat loyal mais exigeant avec l’Etat pour toujours mieux préserver les intérêts des collectivités et de leurs groupements. 
Plus de 34 000 maires et présidents d'intercommunalité en sont aujourd'hui adhérents. 

L’histoire de l’AMF est celle de la défense des libertés locales. L’association veille sans relâche à ce que la décentralisation garantisse aux communes une réelle autonomie de gestion des affaires locales et s’implique avec force pour que les maires disposent de moyens juridiques et financiers suffisants pour assurer leurs missions. Du fait de la diversité de ses représentants et de la qualité de ses services, l’AMF est reconnu comme une force de proposition, en capacité réelle d’entretenir un dialogue permanent avec les pouvoirs publics. 

Force de proposition et de représentation, l’AMF intervient comme interlocuteur privilégié des pouvoirs publics, très en amont des projets, partout où se jouent l’avenir des communes, de leurs groupements et les conditions de leur développement. 

Dans le cadre de leur activité de conseil et d’aide à la décision, les services de l’AMF exercent un suivi continu de l’actualité législative et réglementaire des collectivités. Ils conduisent un travail d’expertise approfondie qui permet de délivrer des conseils personnalisés aux maires et aux présidents de communautés. 

### b) Les objectifs du site

L’Association de Maires de France du 34, souhaite redonner vie à son site “assomaires34.fr”, celui-ci étant quasiment à l’abandon, beaucoup de dépréciations y sont visibles, il ne possède plus de certificat SSL assurant une connexion sécurisée à ses utilisateurs et le code n’est plus adapté aux technologies actuelles.  

Reprendre le code déjà existant serait une perte de temps et d’aucune utilité, selon mon analyse, je propose donc de tout concevoir depuis le départ en repartant selon les mêmes principes que l’ancienne version mais en apportant de nouvelles fonctionnalités ainsi qu’en effectuant quelques améliorations au niveau de la structure du site et de ses grandes sections. Les objectifs du site restent les mêmes, donc, c’est avant tout un site d’information pour les maires ainsi que leurs collaborateurs.  

Ce site permettra aussi de contacter facilement les personnes faisant partie de l’organigramme de l’AMF34 et mettra à la disposition de tous ses visiteurs les dernières informations concernant les communes et les mairies. Il offrira également un annuaire de tous les membres de l’AMF. Le site peut être définit à la fois comme vitrine ainsi que comme un média en ligne. 

### c) La cible

Le site sera ouvert à tous mais il s’adressera principalement aux personnes des mairies et plus particulièrement aux administrations de chaque mairie et majoritairement aux maires. Au niveau de l’âge des personnes de plus de 30ans des catégories socio-professionnelles intermédiaire (employés administratifs), cadres et professions intellectuelles supérieures.  

### d) Périmètre du projet 

Le site se devra d’être totalement responsive (adaptable sur mobile, tablette et desktop), j’estime que le trafic sera très hétérogène en matière de support, d’où l’importance d’apporter une attention toute particulière à cela.  

Le site en revanche ne nécessite pas d’être multilingue au vu de la cible (uniquement des administrations françaises). 


### e) Description de l'existant

Actuellement aucun professionnel du Web ne s’occupe de la version déjà existante du site AMF34.  

Les dépréciations y sont visibles (d’où la nécessité d’une veille technologique et d’une maintenance régulière sur un site internet), beaucoup de problèmes de dispositions des éléments composants le site le rende moins “intuitifs”. 

 Le non renouvellement d’un certificat SSL (indiqué dans la barre d’URL du navigateur comme non sécurisé) peut faire fuir certains utilisateurs et ne donnent pas une bonne image du site de l’association sur le Web. 

Le site possède un nom de domaine mais je propose de le changer (faible coût, prévu dans mes frais de maintenance) afin de l’associer avec des noms de domaines email ainsi que d’éviter des démarches parfois complexes entre les différents hébergeurs pour transférer un nom de domaine. 

L’analyse du code source montre que les balises Meta ne sont pas optimisées de manière à augmenter la visibilité sur les moteurs de recherche (google, bing, …) 

L’ancienne version propose des logos et des articles que l’on peut surement récupérer. Les éléments qu’il contient peuvent permettre de ne pas faire intervenir un graphiste. 


## 2. Description graphique

### a) Charte Graphique

Je possède actuellement le logo de l’AMF34, à partir de celui-ci j’ai créé une palette de couleur ainsi qu’à partir des couleurs du logo du département de l’Hérault.  A partir d’une de ses deux palettes (où contre-proposition), nous allons déterminer les couleurs dominantes qui composeront le site. 

##### Les logos en ma possession : 

![Logos AMF34 et Hérault](https://raw.githubusercontent.com/PaulBrousses34/AMF34/master/AMF34/public/images/logoscdc.png)

##### Les deux propositions : 

![Palettes graphiques](https://raw.githubusercontent.com/PaulBrousses34/AMF34/master/AMF34/public/images/palettes.png)

### b) Design

Le design vis-à-vis de l’ancienne version se verra bien évidemment plus moderne et adapté, mais également plus “intuitif”, mot qui reviendra souvent du fait de la cible du site ainsi que de la nécessité au regard de son objectif.  

### c) Maquettes

Au regard des éléments en ma possession et après un entretien avec Mr Xicoy, j’ai proposé une maquette avec la palette couleur correspondant au logo de l’AMF34. En attendant une validation, et des modifications afin de la valider je n’ai pas encore décliné aux autres pages et légendé mes maquettes.  

##### Proposition page d’accueil Desktop/Mobile : 

![Maquette Accueil Desktop](https://raw.githubusercontent.com/PaulBrousses34/AMF34/master/AMF34/public/images/Maquettes.png)


## 3. Description fonctionnelle et technique 

### a) Arborescence du site

![Arborescence](https://raw.githubusercontent.com/PaulBrousses34/GarantiesOptimales/master/public/arborescence.png)

[Voir en meilleure qualité](https://www.gloomaps.com/tKhyTdfZmj )

### b) Description fonctionnelle

Au regard de notre premier entretien, nous avons défini les grandes lignes du futur site et évalué les besoins. L’application devra donc comprendre : 
-     Un Back-Office. 
-     Un espace membre, où retrouver ses documents, les échanger et déclarer un sinistre 
-     Une base de données. 
-     Une possibilité d’inscription à la newsletter. 

On peut donc identifier 3 types d’utilisateurs : 
-     Le visiteur ayant accès à l’ensemble du site (sauf espace membre et back office). 
-     L'utilisateur connecté bénéficiant d’un espace membre. 
-     Les administrateurs ayant accès au back office. 


### c) Informations relatives aux contenus

Les divers éléments amenés à alimenter l’application sont notamment des articles, des modifications, ajouts et suppressions de formules d’assurances, l’ajout de nouveau produits. 

Tout cela sera fourni par les compagnies d’assurance et par le gérant de la société. Ce contenu sera intégré à la base de données.  

Le contenu devra dans le même temps être ajouté aux réseaux sociaux. 


### d) Technologies utilisées 

#### Outils de conception et de stockage :  

-    GitHub, pour le stockage et la gestion des versions. 

-    Trello, pour l’organisation des tâches. 

-    Google Drive, pour le stockage de la documentation. 

-    Mocodo, pour la création du Modèle Conceptuel de Données. 

-    Balsamiq, pour la création des Wireframes. 

-    GlooMaps, pour la conception de l’arborescence. 

-    Toolki, pour la palette de couleur. 

##### Développement côté Frontend :  

-    Twig, le moteur de Template de Symfony. 

-    JavaScript, langage pour dynamiser les éléments. 

-    JQuery, librairie JavaScript. 

-    Bootstrap, le Framework JavaScript/CSS afin de styliser le site et faciliter le responsive design. 

##### Développement côté Backend :  

-    Symfony 5, le Framework PHP. 

-    MySQL, le gestionnaire de base de données. 

-    Doctrine, l’Object Relational Mapping de Symfony. 

-    PhpMyAdmin, l’interface de gestion de base de données. 

J’utiliserai également Google Analytics afin d’avoir des informations sur le trafic du site ainsi que “tarteauciton” pour la gestion des cookies.  


### e) User stories


|En tant que|Je veux pouvoir|Afin de|
|---    |:-:    |:-:    |
| Visiteur |Consulter les actualités|Me tenir informé de l’actualité de l’assurance |       
|       |Consulter les informations juridiques de la société |Connaître les mentions légales |
|       |En savoir plus sur MGL Courtage |Afin de connaître la société|
|       |Contacter la société via un formulaire de contact|Obtenir de renseignements, proposer quelque chose ou porter une réclamation |
|       |Consulter les diverses assurances proposées|Me renseigner sur les propositions faites par Garanties Optimales|
|       |Obtenir un devis et/ou souscrire à une assurance|Souscrire ou obtenir un devis |
|       |Créer un compte|Bénéficier d’un espace personnel|
| Utilisateur connecté |Accéder à mes documents|Retrouver facilement les documents relatifs à mon/mes assurance(s)|
|       |Echanger des documents facilement avec mon courtier|Faciliter l’échange de document|
|       |Déclarer directement un sinistre en ligne|Faciliter la déclaration de sinistre|
| Administrateur |Ajouter, modifier, supprimer un article|Gérer le contenu du site |
|       |Ajouter, modifier, supprimer un utilisateur|Gérer le contenu du site |
|       |Ajouter, modifier, supprimer un produit d’assurance|Gérer le contenu du site|

### f) Dictionnaire des routes

|Controller|URL|HTTP Method|Method|Title|Content|
|---    |:-:    |:-:    |:-:    |:-:    |--:    |
| **FrontOffice** |
|HomeController|/|GET|home|Accueil|Actu, liste produit et contact|
| |/contact-formulaire|GET-POST|contact|Contact|Formulaire de contact|
|NewsletterController|/newsletter|GET|Browse|Actualités|Liste de tout les articles|
| |/newsletter/{id}|GET|Read|Article|Un article|
|AssuranceController|/assurances/categorie/{slug}|GET|Browse|Assurance par catégorie|Liste des produits par catégorie|
||/assurances/sous-categorie/{slug}|GET|Browse|Assurance par sous-catégorie|Liste des produits par sous-catégorie|
||/assurances/types/{slug}|GET|Browse|Assurance par type|Liste des produits par type|
||/assurances/demande-devis|GET-POST|askDevis|Formulaire de demande de devis|Formulaire spécifique demande de devis|
||/assurances/devis/{slug}|GET|Read|Devis {slug}|Affiche le tarificateur selon le produit souhaité|
|UserController|/profil/{nom}/{id}|GET|Read|Mon espace personnel|Affiche les informations utilisateurs et les documents|
||/profil/edition/ {nom}/{id}|GET-POST|Edit|Modifier mon profil|Affiche le formulaire de modification du profil|
||/profil/suppression/{nom}/{id}|DELETE|Delete|Bouton de suppression|Supprimer mon profil|
|SecurityController|/connexion/{nom}/{id}|GET – POST|app_login|Connexion|Formulaire de connexion|
||/deconnexion|POST|app_logout|Déconnexion|Bouton ou lien de deconnexion|
| **BackOffice** |
|NewsletterCrudController|/admin/newsletter|GET|Browse|Toutes les actualités|Liste des actualités|
||/admin/newsletter/{id}|GET|Read|{title} de l'article|Affichage d’un article en particulier|
||/admin/newsletter/edition/{id}|GET-POST|Edit|Modifier un article|Formulaire de modification de l’article|
||/admin/newsletter/ajouter|GET-POST|Add|Ajouter un article|Formulaire d’ajout d’un article|
||/admin/newsletter/suppression/{slug}|DELETE|Delete|Suppression d'un article|Bouton de suppression d'un article|
|SousCategorieCrudController|/admin/assurances/sous-categorie|GET|Browse|Liste de toutes les sous catégories|Affichage de la liste des types par sous catégorie|
||/admin/sous-categorie/{slug}|GET|Read|Sous catégorie {slug}|Affichage d'une sous catégorie|
||/admin/sous-categorie/edition/{slug}|GET-POST|Edit|Modifier une sous catégorie|Formulaire de modification d'une sous catégorie|
||/admin/sous-categorie/ajouter|GET-POST|Add|Ajouter une sous catégorie|Formulaire d’ajout d’une sous catégorie|
||/admin/sous-categorie/suppression/{slug}|DELETE|Delete|Suppression d'une sous catégorie|Bouton de suppression d'une sous catégorie|
|TypeCrudController|/admin/assurances/types|GET|Browse|Liste de toutes les types|Affichage de la liste des types|
||/admin/types/{slug}|GET|Read|Type {slug}|Affichage d'un type|
||/admin/types/edition/{slug}|GET-POST|Edit|Modifier un type|Formulaire de modification d'un type|
||/admin/types/ajouter|GET-POST|Add|Ajouter un type|Formulaire d’ajout d’un type|
||/admin/types/suppression/{slug}|DELETE|Delete|Suppression d'un type|Bouton de suppression d'un type|
|DocumentCrudController|/admin/document|GET|Browse|Liste de tous les documents|Affichage de la liste des documents|
||/admin/document/{id}|GET|Read|Document {id}|Affichage d'un document|
||/admin/document/edition/{slug}|GET-POST|Edit|Modifier un document|Formulaire de modification d'un document|
||/admin/document/ajouter|GET-POST|Add|Ajouter un document|Formulaire d’ajout d’un document|
||/admin/document/suppression/{slug}|DELETE|Delete|Suppression d'un document|Bouton de suppression d'un document|
|UtilisateurCrudController|/admin/utilisateurs|GET|Browse|Liste de tous les utilisateurs|Affichage de la liste des utilisateurs|
||/admin/utilisateur/{id}|GET|Read|Utilisateur {name}|Affichage d'un utilisateur|
||/admin/utilisateur/edition/{slug}|GET-POST|Edit|Modifier un utilisateur|Formulaire de modification d'un utilisateur|
||/admin/utilisateur/ajouter|GET-POST|Add|Ajouter un utilisateur|Formulaire d’ajout d’un utilisateur|
||/admin/utilisateur/suppression/{id}|DELETE|Delete|Suppression d'un utilisateur|Bouton de suppression d'un utilisateur|

### g) Dictionnaire des données

|Table|Champ|Type|Spécificités|
|---    |:-:    |:-:    |:-:    |
|Categorie|id|INT|PRIMARY KEY, NOT NULL, AUTO_INCREMENT, UNSIGNED |
||name|VARCHAR (255)|NOT NULL|
||createdAt|TIMESTAMP|NOT NULL, CURRENT_TIMESTAMP|
||updatedAt|TIMESTAMP|NULL|
||slug|VARCHAR (255)|NOT NULL|
|SousCategorie|id|INT|PRIMARY KEY, NOT NULL, AUTO_INCREMENT, UNSIGNED |
||name|VARCHAR (255)|NOT NULL|
||createdAt|TIMESTAMP|NOT NULL, CURRENT_TIMESTAMP|
||updatedAt|TIMESTAMP|NULL|
||slug|VARCHAR (255)|NOT NULL|
||categorie_id|INT|NOT NULL, FOREIGN KEY|
|Type|id|INT|PRIMARY KEY, NOT NULL, AUTO_INCREMENT, UNSIGNED |
||name|VARCHAR (255)|NOT NULL|
||createdAt|TIMESTAMP|NOT NULL, CURRENT_TIMESTAMP|
||updatedAt|TIMESTAMP|NULL|
||slug|VARCHAR (255)|NOT NULL|
||Sous_categorie_id|INT|NOT NULL, FOREIGN KEY|
|Newsletter|id|INT|PRIMARY KEY, NOT NULL, AUTO_INCREMENT, UNSIGNED |
||title|VARCHAR (255)|NOT NULL|
||image|VARCHAR (255)|NOT NULL|
||content|VARCHAR (50000)|NOT NULL|
||createdAt|TIMESTAMP|NOT NULL, CURRENT_TIMESTAMP|
||updatedAt|TIMESTAMP|NULL|
|Document|id|INT|PRIMARY KEY, NOT NULL, AUTO_INCREMENT, UNSIGNED |
||utilisateur_id|INT|NOT NULL, FOREIGN KEY|
||fichier|VARCHAR (255)|NOT NULL|
||type|VARCHAR (255)|NOT NULL|
||dateTelechargement|TIMESTAMP|NOT NULL, CURRENT_TIMESTAMP|
||updated|TIMESTAMP|NULL|
|User|id|INT|PRIMARY KEY, NOT NULL, AUTO_INCREMENT, UNSIGNED |
||firstname|VARCHAR (255)|NOT NULL|
||lastname|VARCHAR (255)|NOT NULL|
||email|VARCHAR (255)|NOT NULL|
||rôles|JSON|NOT NULL|
||adress|VARCHAR (255)|NULL|
||ville|VARCHAR (255)|NULL|
||codePostal|INT|NULL|
||newsletter|BOOL|NOT NULL|


### h) Modèle Logique de Données

![Modèle Logique de Données](https://raw.githubusercontent.com/PaulBrousses34/GarantiesOptimales/master/public/assets/images/photos/MLD.png)


## 4. Organisation

### a) Planning

Le développement du site se fera sur 6 semaines. Suite à la mise en production une veille technologique est à prévoir. Le développement du site ne pourra commencer que lorsque le cahier des charges sera complet. Chaque sprint dure 1 semaine sauf le 4eme qui est prévu sur 2 semaines. Le travail s’effectuera selon les principes de la méthodes Agile Scrum les cycles de développement seront donc découpés en sprint de la manière suivante : 

|Sprint|Tâches|
|---    |:-:    |
|1|Intégration HTML/CSS, création de la base de données, création de fixtures|
|2|Création des Controllers et des méthodes, création des formulaires, création des templates associés à toutes les méthodes|
|3|Mise en en place des diverses contraintes, gestion des rôles, création et configuration BackOffice|
|4|Création des fiches produits|
|5|Recherche et correction de bugs, tests unitaires et fonctionnels, mise en production|

### b) Gestion du versionning


Chaque jour le développement se fera sur une nouvelle branche Git se nommant 12/12 par exemple si la date du jour est le 12 décembre. Cela permet de récupérer facilement la version voulue. Chaque jour les tâches effectuées seront notées dans un cahier de bord afin de récupérer plus facilement une partie du code en cas de problème. 
