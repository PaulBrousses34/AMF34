# **ASSOCIATION DES MAIRES DE FRANCE DE L'HERAULT** 



![Logo AMF34](https://raw.githubusercontent.com/PaulBrousses34/AMF34/master/AMF34/public/images/logo.png)




-----------------------------------------------------------------------------------------------------------
## AMF34 ##

### *Avec les élus locaux, l'Hérault avance* 
-----------------------------------------------------------------------------------------------------------



#### Projet de création d'un nouveau site web pour l'AMF34. En attente d'acceptation du devis ...


-----------------------------------------------------------------------------------------------------------


## 1. Présentation du projet

### a) Présentation de l'association

Créée en 1907, reconnue d’utilité publique dès 1933, l’AMF est aux côtés des maires et des présidents d’intercommunalité, dans le respect des valeurs et des principes qui ont prévalu depuis sa création : défense des libertés locales, appui concret et permanent aux élus dans la gestion au quotidien, partenariat loyal mais exigeant avec l’Etat pour toujours mieux préserver les intérêts des collectivités et de leurs groupements. 
Plus de 34 000 maires et présidents d'intercommunalité en sont aujourd'hui adhérents. 

L’histoire de l’AMF est celle de la défense des libertés locales. L’association veille sans relâche à ce que la décentralisation garantisse aux communes une réelle autonomie de gestion des affaires locales et s’implique avec force pour que les maires disposent de moyens juridiques et financiers suffisants pour assurer leurs missions. Du fait de la diversité de ses représentants et de la qualité de ses services, l’AMF est reconnu comme une force de proposition, en capacité réelle d’entretenir un dialogue permanent avec les pouvoirs publics. 

Force de proposition et de représentation, l’AMF intervient comme interlocuteur privilégié des pouvoirs publics, très en amont des projets, partout où se jouent l’avenir des communes, de leurs groupements et les conditions de leur développement. 

Dans le cadre de leur activité de conseil et d’aide à la décision, les services de l’AMF exercent un suivi continu de l’actualité législative et réglementaire des collectivités. Ils conduisent un travail d’expertise approfondie qui permet de délivrer des conseils personnalisés aux maires et aux présidents de communautés. 

### b) Les objectifs du site

L’Association de Maires de France du 34, souhaite redonner vie à son site “assomaires34.fr”, celui-ci étant quasiment à l’abandon, beaucoup de dépréciations y sont visibles, il ne possède plus de certificat SSL assurant une connexion sécurisée à ses utilisateurs et le code n’est plus adapté aux technologies actuelles.  

Reprendre le code déjà existant serait une perte de temps et d’aucune utilité, selon mon analyse, je propose donc de tout concevoir depuis le départ en repartant selon les mêmes principes que l’ancienne version mais en apportant de nouvelles fonctionnalités ainsi qu’en effectuant quelques améliorations au niveau de la structure du site et de ses grandes sections. Les objectifs du site restent les mêmes, donc, c’est avant tout un site d’information pour les maires ainsi que leurs collaborateurs.  

Ce site permettra aussi de contacter facilement les personnes faisant partie de l’organigramme de l’AMF34 et mettra à la disposition de tous ses visiteurs les dernières informations concernant les communes et les mairies. Il offrira également un annuaire de tous les membres de l’AMF. Le site peut être définit à la fois comme vitrine ainsi que comme un média en ligne. 

### c) La cible

Le site sera ouvert à tous mais il s’adressera principalement aux personnes des mairies et plus particulièrement aux administrations de chaque mairie et majoritairement aux maires. Au niveau de l’âge des personnes de plus de 30ans des catégories socio-professionnelles intermédiaire (employés administratifs), cadres et professions intellectuelles supérieures.  

### d) Périmètre du projet 

Le site se devra d’être totalement responsive (adaptable sur mobile, tablette et desktop), j’estime que le trafic sera très hétérogène en matière de support, d’où l’importance d’apporter une attention toute particulière à cela.  

Le site en revanche ne nécessite pas d’être multilingue au vu de la cible (uniquement des administrations françaises). 


### e) Description de l'existant

Actuellement aucun professionnel du Web ne s’occupe de la version déjà existante du site AMF34.  

Les dépréciations y sont visibles (d’où la nécessité d’une veille technologique et d’une maintenance régulière sur un site internet), beaucoup de problèmes de dispositions des éléments composants le site le rende moins “intuitifs”. 

 Le non renouvellement d’un certificat SSL (indiqué dans la barre d’URL du navigateur comme non sécurisé) peut faire fuir certains utilisateurs et ne donnent pas une bonne image du site de l’association sur le Web. 

Le site possède un nom de domaine mais je propose de le changer (faible coût, prévu dans mes frais de maintenance) afin de l’associer avec des noms de domaines email ainsi que d’éviter des démarches parfois complexes entre les différents hébergeurs pour transférer un nom de domaine. 

L’analyse du code source montre que les balises Meta ne sont pas optimisées de manière à augmenter la visibilité sur les moteurs de recherche (google, bing, …) 

L’ancienne version propose des logos et des articles que l’on peut surement récupérer. Les éléments qu’il contient peuvent permettre de ne pas faire intervenir un graphiste. 


## 2. Description graphique

### a) Charte Graphique

Je possède actuellement le logo de l’AMF34, à partir de celui-ci j’ai créé une palette de couleur ainsi qu’à partir des couleurs du logo du département de l’Hérault.  A partir d’une de ses deux palettes (où contre-proposition), nous allons déterminer les couleurs dominantes qui composeront le site. 

##### Les logos en ma possession : 

![Logos AMF34 et Hérault](https://raw.githubusercontent.com/PaulBrousses34/AMF34/master/AMF34/public/images/logoscdc.png)

##### Les deux propositions : 

![Palettes graphiques](https://raw.githubusercontent.com/PaulBrousses34/AMF34/master/AMF34/public/images/palettes.png)

### b) Design

Le design vis-à-vis de l’ancienne version se verra bien évidemment plus moderne et adapté, mais également plus “intuitif”, mot qui reviendra souvent du fait de la cible du site ainsi que de la nécessité au regard de son objectif.  

### c) Maquettes

Au regard des éléments en ma possession et après un entretien avec Mr Xicoy, j’ai proposé une maquette avec la palette couleur correspondant au logo de l’AMF34. En attendant une validation, et des modifications afin de la valider je n’ai pas encore décliné aux autres pages et légendé mes maquettes.  

##### Proposition page d’accueil Desktop/Mobile : 

![Maquette Accueil Desktop](https://raw.githubusercontent.com/PaulBrousses34/AMF34/master/AMF34/public/images/maquettes.png)


## 3. Description fonctionnelle et technique 

### a) Arborescence du site

Incompléte en attendant validation et entretien
![Arborescence](https://raw.githubusercontent.com/PaulBrousses34/AMF34/master/AMF34/public/images/Arborescence.png)


### b) Description fonctionnelle

Au regard de notre premier entretien, nous avons défini les grandes lignes du futur site et évalué les besoins. L’application devra donc comprendre : 
-     Un Back-Office. 
-     Un espace membre mais sans possibilité d’inscription, car les utilisateurs se verront attribué des identifiants de connexion à cet espace membre pour que cet espace ne soit pas accessible à des personnes non autorisées. 
-     Un moteur de recherche interne
-     Une base de données. 
-     Une possibilité d’inscription à la newsletter. 

On peut donc identifier 3 types d’utilisateurs : 
-     Le visiteur ayant accès à l’ensemble du site (sauf espace membre et back office). 
-     L'utilisateur connecté bénéficiant d’un espace membre (attribué par les administrateurs). 
-     Les administrateurs ayant accès au back office. 


### c) Informations relatives aux contenus

Les divers éléments amenés à alimenter l’application sont notamment des articles, des événements à venir, des documents téléchargeables et des photos.  

Tout cela sera fourni par l’administration de l’AMF34. Ce contenu sera intégré à la base de données.  

Le contenu devra dans le même temps être ajouté aux réseaux sociaux. Ma proposition effectuée via mon devis maintenance et gestion du contenu comprend l’ajout et la gestion du contenu au site ainsi qu’aux réseaux sociaux. 


### d) Contraintes techniques

Mr Xicoy m’a fait part d’une demande sur laquelle je n’ai pas forcement la main, développé une relation entre le site et une plateforme externe. Une étude sur sa faisabilité est nécessaire, seuls les développeurs de la plateforme en question peuvent m’apporter une réponse à cette problématique. Il faut donc prévoir une mise en relation avec les administrateurs de la plateforme. C’est actuellement la seule problématique de développement à laquelle je suis confronté dans ce projet. 

### e) Technologies utilisées 

#### Outils de conception et de stockage :  

-    GitHub, pour le stockage et la gestion des versions. 

-    Trello, pour l’organisation des tâches. 

-    Google Drive, pour le stockage de la documentation. 

-    Mocodo, pour la création du Modèle Conceptuel de Données. 

-    Balsamiq, pour la création des Wireframes. 

-    GlooMaps, pour la conception de l’arborescence. 

-    Toolki, pour la palette de couleur. 

##### Développement côté Frontend :  

-    Twig, le moteur de Template de Symfony. 

-    JavaScript, langage pour dynamiser les éléments. 

-    JQuery, librairie JavaScript. 

-    Bootstrap, le Framework JavaScript/CSS afin de styliser le site et faciliter le responsive design. 

##### Développement côté Backend :  

-    Symfony 5, le Framework PHP. 

-    MySQL, le gestionnaire de base de données. 

-    Doctrine, l’Object Relational Mapping de Symfony. 

-    PhpMyAdmin, l’interface de gestion de base de données. 

J’utiliserai également Google Analytics afin d’avoir des informations sur le trafic du site ainsi que “tarteauciton” pour la gestion des cookies.  


### e) User stories


|En tant que|Je veux pouvoir|Afin de|
|---    |:-:    |:-:    |
| Visiteur |Consulter les actualités|Me tenir informé de l’actualité|       
|       |Consulter l’agenda|Me tenir informé des événements à venir |
|       |Consulter les informations juridiques|Obtenir des renseignements d’ordre juridique|
|       |En savoir plus sur l’AMF34|Afin de connaître l’association et ses objectifs|
|       |Contacter un administrateur via un formulaire de contact|Obtenir de renseignements, proposer quelque chose ou porter une réclamation|
|       |Obtenir un devis et/ou souscrire à une assurance|Souscrire ou obtenir un devis |
|       |Rechercher un élément du site via un moteur de recherche|Accéder rapidement à une information précise|
| Utilisateur connecté |Accéder à l’annuaire des membres|Rechercher un numéro de téléphone, une adresse email, des informations sur un membre, ...|
| Administrateur |Ajouter, modifier, supprimer un article|Gérer le contenu du site |
|       |Ajouter, modifier, supprimer un membre|Gérer le contenu du site |
|       |Ajouter, modifier, supprimer un évènement|Gérer le contenu du site|

### f) Dictionnaire des routes

|Controller|URL|HTTP Method|Method|Title|Content|
|---    |:-:    |:-:    |:-:    |:-:    |--:    |
| **FrontOffice** |
|HomeController|/|GET|home|Accueil|Actu et agenda|
| |/contact|GET-POST|contact|Contact|Formulaire et infos|
|InfoController|/actualites|GET|Browse|Actualités|Liste de toutes les actualités|
| |/actualites/{slug}|GET|Read|Article {title}|Un article|
|EventController|/agenda|GET|Browse|Les événements|Liste des événements|
||/agenda/{slug}|GET|Read|Evenement {title}|Un evenement|
|UserController|/profil/{id}|GET|Read|Mon espace personnel|Affiche les informations utilisateurs et autres membres|
||/profil/edition/{id}|GET-POST|Edit|Modifier mon profil|Affiche le formulaire de modification du profil|
||/profil/suppression/{id}|DELETE|Delete|Bouton de suppression|Supprimer mon profil|
|SecurityController|/connexion|GET – POST|app_login|Connexion|Formulaire de connexion|
||/deconnexion|POST|app_logout|Déconnexion|Bouton ou lien de deconnexion|
| **BackOffice** |
|InfoCrudController|/admin/actualites|GET|Browse|Toutes les actualités|Liste des actualités|
||/admin/actualites/{id}|GET|Read|{title} de l'article|Affichage d’un article en particulier|
||/admin/actualites/edition/{id}|GET-POST|Edit|Modifier un article|Formulaire de modification de l’article|
||/admin/actualites/ajouter|GET-POST|Add|Ajouter un article|Formulaire d’ajout d’un article|
||/admin/actualites/suppression/{id}|DELETE|Delete|Suppression d'un article|Bouton de suppression d'un article|
|EventCrudController|/admin/evenement|GET|Browse|Liste de toutes les evenements|Affichage de la liste des evenements|
||/admin/evenement/{id}|GET|Read|Evenement {name}|Affichage d'un evenement|
||/admin/evenement/edition/{id}|GET-POST|Edit|Modifier un evenement|Formulaire de modification d'un evenement|
||/admin/evenement/ajouter|GET-POST|Add|Ajouter un evenement|Formulaire d’ajout d'un evenement|
||/admin/evenement/suppression/{id}|DELETE|Delete|Suppression d'un evenement|Bouton de suppression d'un evenement|
|UtilisateurCrudController|/admin/utilisateurs|GET|Browse|Liste de tous les utilisateurs|Affichage de la liste des utilisateurs|
||/admin/utilisateur/{id}|GET|Read|Utilisateur {name}|Affichage d'un utilisateur|
||/admin/utilisateur/edition/{slug}|GET-POST|Edit|Modifier un utilisateur|Formulaire de modification d'un utilisateur|
||/admin/utilisateur/ajouter|GET-POST|Add|Ajouter un utilisateur|Formulaire d’ajout d’un utilisateur|
||/admin/utilisateur/suppression/{id}|DELETE|Delete|Suppression d'un utilisateur|Bouton de suppression d'un utilisateur|

### g) Dictionnaire des données

|Table|Champ|Type|Spécificités|
|---    |:-:    |:-:    |:-:    |
|News|id|INT|PRIMARY KEY, NOT NULL, AUTO_INCREMENT, UNSIGNED |
||title|VARCHAR (255)|NOT NULL|
||content|VARCHAR (50000)|NOT NULL|
||createdAt|TIMESTAMP|NOT NULL, CURRENT_TIMESTAMP|
||updatedAt|TIMESTAMP|NULL|
||slug|VARCHAR (255)|NOT NULL|
||image|VARCHAR (255)|NOT NULL|
|Events|id|INT|PRIMARY KEY, NOT NULL, AUTO_INCREMENT, UNSIGNED |
||title|VARCHAR (255)|NOT NULL|
||content|VARCHAR (50000)|NOT NULL|
||createdAt|TIMESTAMP|NOT NULL, CURRENT_TIMESTAMP|
||updatedAt|TIMESTAMP|NULL|
||slug|VARCHAR (255)|NOT NULL|
||date|DATETIME|NULL|
||location||VARCHAR(255)|NULL|
|User|id|INT|PRIMARY KEY, NOT NULL, AUTO_INCREMENT, UNSIGNED |
||sex|BOOL|NOT NULL|
||firstname|VARCHAR (255)|NOT NULL|
||lastname|VARCHAR (255)|NOT NULL|
||password|VARCHAR (255)|NOT NULL|
||phoneNumber|INT|NOT NULL|
||email|VARCHAR (255)|NOT NULL|
||rôles|JSON|NOT NULL|
||function|VARCHAR (255)|NOT NULL|
||city|VARCHAR (255)|NULL|
||newsletter|BOOL|NOT NULL|


### h) Modèle Conceptuel de Données

Incomplet en attente de validation et de precisions supplémentaires 

![Modèle Conceptuel de Données](https://raw.githubusercontent.com/PaulBrousses34/AMF34/master/AMF34/public/images/MCD.png)


## 4. Organisation

### a) Planning

Le développement du site se fera sur 4 semaines. Suite à la mise en production une veille technologique est à prévoir. Le développement du site ne pourra commencer que lorsque le cahier des charges sera complet. Le travail s’effectuera selon les principes de la méthodes Agile Scrum les cycles de développement seront donc découpés en sprint d'une semaine chacun de la manière suivante : 

|Sprint|Tâches|
|---    |:-:    |
|1|Intégration HTML/CSS, création de la base de données, création de fixtures|
|2|Création des Controllers et des méthodes, création des formulaires, création des templates associés à toutes les méthodes|
|3|Mise en en place des diverses contraintes, gestion des rôles, création et configuration BackOffice|
|4|Recherche et correction de bugs, tests unitaires et fonctionnels, mise en production|

### b) Gestion du versionning


Chaque jour le développement se fera sur une nouvelle branche Git se nommant 12/12 par exemple si la date du jour est le 12 décembre. Cela permet de récupérer facilement la version voulue. Chaque jour les tâches effectuées seront notées dans un cahier de bord afin de récupérer plus facilement une partie du code en cas de problème. 
